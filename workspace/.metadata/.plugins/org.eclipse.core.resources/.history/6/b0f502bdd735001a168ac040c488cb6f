package algospot;

import java.util.*;

public class BoardCover_2 {
	
	static int[][] board = new int[20][20];
	static int[][][] piece = {
			{{0, 0}, {0, 1}, {1, 0}},
			{{0, 0}, {0, 1}, {1, 1}},
			{{0, 0}, {1, 0}, {1, 1}},
			{{0, 0}, {1, -1}, {1, 0}}
	};
	
	static int h, w;
	static int result = 0;
	
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Scanner scan = new Scanner(System.in);
		int c = scan.nextInt();
		
		for(int test=1; test<=c; test++) {
			result = 0;
			h = scan.nextInt();
			w = scan.nextInt();
			scan.nextLine();
			
			for(int i=0; i<h; i++) {
				String str = scan.nextLine();
				for(int j=0; j<str.length(); j++) {
					char ch = str.charAt(j);
					if(ch == '#') {
						board[i][j] = 1;
					} 
					else if(ch == '.'){
						board[i][j] = 0;
					}
				}
			}
			
			cover();
			System.out.println(result);
		}
	}
	
	// type: 블록 타입
	public static void cover() {
		// 가장 위, 왼쪽 좌표 찾음
		int ty = -1;
		int tx = -1;
		
		for(int i=0; i<h; i++) {
			for(int j=0; j<w; j++) {
				if(board[i][j] == 0) {
					ty = i;
					tx = j;
					break;
				}
			}
			if(ty != -1) {
				break;
			}
		}

		// 기저: 모든 칸이 덮여있음
		if(ty == -1) {
			result++;
			return;
		}
		
		// 블록을 덮어본다
		for(int type=0; type<4; type++) { // 4가지 타입
			int ny = -1;
			int nx = -1;
			
			for(int j=0; j<3; j++) { // 3개의 좌표
				ny = ty + piece[type][j][0];
				nx = tx + piece[type][j][1];
				
				System.out.println("(" + ny + ", " + nx +") cover");
				board[ny][nx] += 1;
				
				// 보드 밖으로
				if(ny < 0 || ny >=  h || nx < 0 || nx >= w) {
					continue;
				}
				
				// 이미 덮여있음 ..
				if(board[ny][nx] > 1) {
					continue;
				}
				
				// 덮을 수 있어
//				cover();
			}
			cover();
			uncover(ny, nx, type);
		}
	}
	
	public static void uncover(int y, int x, int type) {
		int ny = -1;
		int nx = -1;
		for(int i=0; i<3; i++) {
			ny = y + piece[type][i][0];
			nx = x + piece[type][i][1];
			
			board[ny][nx] -= 1;
		}
		System.out.println("(" + ny + ", " + nx +") cover");
	}
}
